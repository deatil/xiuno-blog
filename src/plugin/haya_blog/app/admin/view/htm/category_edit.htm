<?php include _include(ADMIN_PATH.'view/htm/header.inc.htm'); ?>

<?php include _include($haya_blog_admin_view.'/tab.inc.htm'); ?>

<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-6 font-weight-bold line-height-3">
                <ul class="nav nav-tabs card-header-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" href="javascript:;">编辑分区</a>
                    </li>
                </ul>
            </div>
            
            <div class="col-6 text-right">
                <a href="<?php echo url('haya_blog-category'); ?>" class="btn btn-sm btn-dark">返回</a>
            </div>
        </div>
    </div>

    <div class="card-body">
        <div class="row">
            <div class="col-sm-12">
                <form action="<?php echo url('haya_blog-category-edit');?>" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="id" value="<?php echo $id; ?>" style="display: none;">
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="name">
                            <span class="text-danger font-weight-bold">*</span>
                            标识：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="name" id="name" value="<?php echo $haya_blog_category['name']; ?>" placeholder="填写分区标识" class="form-control">
                            <div class="figure-caption mt-2">
                                设置分区标识，不能为空。英文、数字、下划线及其组合
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="title">
                            <span class="text-danger font-weight-bold">*</span>
                            名称：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="title" id="title" value="<?php echo $haya_blog_category['title']; ?>" placeholder="填写分区名称" class="form-control">
                            <div class="figure-caption mt-2">
                                设置分区名称，不能为空
                            </div>
                        </div>
                    </div>
                    
                    <style>
                    .haya-blog-category-cover:hover {font-weight: 800;}
                    </style>
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="cover">
                            <span class="text-danger font-weight-bold">*</span>
                            Logo：
                        </label>
                        <div class="col-md-8">
                            <?php if (!empty($haya_blog_category['cover'])) { ?>
                                <div class="haya-blog-item mb-2">
                                    <img src="<?php echo haya_blog_attach_url_in_admin($haya_blog_category['cover']); ?>" class="avatar-5"/>
                                </div>
                            <?php } ?>
                            <div class="haya-blog-item">
                                <a class="small text-left" href="javascript:void(0)">
                                    <label class="mb-0 line-height-1 haya-blog-category-cover">
                                        <i class="icon-folder-open-o"></i> 
                                        选择文件
                                        <input type="file" multiple="multiple" class="d-none haya-blog-category-cover-name" name="cover" />
                                    </label>
                                </a>
                                <span class="haya-blog-category-cover-show ml-3 d-none"></span>
                            </div>
                            <div class="figure-caption mt-2">
                                分区logo不能为空
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="keywords">
                            关键字：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="keywords" id="keywords" value="<?php echo $haya_blog_category['keywords']; ?>" placeholder="填写分区关键字" class="form-control">
                            <div class="figure-caption mt-2">
                                设置分区关键字，以半角逗号隔开
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="description">
                            描述：
                        </label>
                        <div class="col-md-8">
                            <textarea class="form-control" style="height: 100px;" placeholder="请填写分区的描述" name="description" id="description"><?php echo $haya_blog_category['description']; ?></textarea>
                            <div class="figure-caption mt-2">
                                设置分区相关描述
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="sort">
                            排序：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="sort" id="sort" value="<?php echo $haya_blog_category['sort']; ?>" placeholder="填写分区排序数字" class="form-control">
                            <div class="figure-caption mt-2">
                                设置分区排序数字
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="status">
                            状态：
                        </label>
                        <div class="col-md-8">
                            <div id="status">
                                <?php if (isset($haya_blog_category['status']) && $haya_blog_category['status'] == 1) { ?>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="status" value="1" checked="checked"> <?php echo lang('enable'); ?>
                                    </label>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="status" value="0"> <?php echo lang('disable'); ?>
                                    </label>
                                <?php } else { ?>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="status" value="1"> <?php echo lang('enable'); ?>
                                    </label>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="status" value="0" checked="checked"> <?php echo lang('disable'); ?>
                                    </label>
                                <?php } ?>
                            </div>
                            
                            <div class="figure-caption mt-2">
                                设置分区的启用状态
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3">
                        <label class="col-md-2 form-control-label"></label>
                        <div class="col-md-2">
                            <button type="submit" class="btn btn-primary btn-block mr-2 mb-2" id="submit"><?php echo lang('save'); ?></button>
                        </div>
                        <div class="col-md-2">
                            <a role="button" class="btn btn-secondary btn-block mb-2" href="javascript:history.back();"><?php echo lang('back'); ?></a>
                        </div>
                    </div>
                    
                </form>
            </div>
        </div>

    </div>
</div>

<?php
include _include(ADMIN_PATH.'view/htm/footer.inc.htm');
?>

<script>
$(function() {
    $(document).on('change', '.haya-blog-category-cover-name', function(e) {
        var files = xn.get_files_from_event(e);
        if (!files[0]) return;
        
        var name = files[0]['name'];
        
        $(".haya-blog-category-cover-show")
            .removeClass('d-none')
            .text(name);
    });

    $('#nav li.nav-item-haya_blog').addClass('active');
});
</script>
