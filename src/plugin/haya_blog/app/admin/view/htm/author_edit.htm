<?php include _include(ADMIN_PATH.'view/htm/header.inc.htm'); ?>

<?php include _include($haya_blog_admin_view.'/tab.inc.htm'); ?>

<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-6 font-weight-bold line-height-3">
                <ul class="nav nav-tabs card-header-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" href="javascript:;">编辑专栏</a>
                    </li>
                </ul>
            </div>
            
            <div class="col-6 text-right">
                <a href="<?php echo url('haya_blog-author'); ?>" class="btn btn-sm btn-dark">返回</a>
            </div>
        </div>
    </div>

    <div class="card-body">
        <div class="row">
            <div class="col-sm-12">
                <form action="<?php echo url('haya_blog-author-edit');?>" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="id" value="<?php echo $id; ?>" style="display: none;">
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="uid">
                            <span class="text-danger font-weight-bold">*</span>
                            用户UID：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="uid" id="uid" value="<?php echo $haya_blog_author['uid']; ?>" placeholder="填写专栏的用户UID" class="form-control">
                            <div class="figure-caption mt-2">
                                设置用户UID，不能为空。当前用户名称：<?php echo $haya_blog_author_user['username']; ?>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="name">
                            <span class="text-danger font-weight-bold">*</span>
                            博客英文名称：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="name" id="name" value="<?php echo $haya_blog_author['name']; ?>" placeholder="填写博客英文名称" class="form-control">
                            <div class="figure-caption mt-2">
                                设置博客的英文名称，不能为空
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="title">
                            <span class="text-danger font-weight-bold">*</span>
                            博客名称：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="title" id="title" value="<?php echo $haya_blog_author['title']; ?>" placeholder="填写博客名称" class="form-control">
                            <div class="figure-caption mt-2">
                                设置博客的中文名称，不能为空
                            </div>
                        </div>
                    </div>
                    
                    <style>
                    .haya-blog-author-cover:hover {font-weight: 800;}
                    </style>
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="cover">
                            <span class="text-danger font-weight-bold">*</span>
                            Logo：
                        </label>
                        <div class="col-md-8">
                            <?php if (!empty($haya_blog_author['cover'])) { ?>
                                <div class="haya-blog-item mb-2">
                                    <img src="<?php echo haya_blog_attach_url_in_admin($haya_blog_author['cover']); ?>" class="avatar-5"/>
                                </div>
                            <?php } ?>
                            <div class="haya-blog-item">
                                <a class="small text-left" href="javascript:void(0)">
                                    <label class="mb-0 line-height-1 haya-blog-author-cover">
                                        <i class="icon-folder-open-o"></i> 
                                        选择文件
                                        <input type="file" multiple="multiple" class="d-none haya-blog-author-cover-name" name="cover" />
                                    </label>
                                </a>
                                <span class="haya-blog-author-cover-show ml-3 d-none"></span>
                            </div>
                            <div class="figure-caption mt-2">
                                专栏logo不能为空
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="keywords">
                            博客关键字：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="keywords" id="keywords" value="<?php echo $haya_blog_author['keywords']; ?>" placeholder="填写博客关键字" class="form-control">
                            <div class="figure-caption mt-2">
                                设置博客的关键字
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="description">
                            博客描述：
                        </label>
                        <div class="col-md-8">
                            <textarea class="form-control" style="height: 100px;" placeholder="请填写博客描述" name="description" id="description"><?php echo $haya_blog_author['description']; ?></textarea>
                            <div class="figure-caption mt-2">
                                设置专栏的博客描述
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3 mt-4">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="article_pagesize">
                            博客每页数量：
                        </label>
                        <div class="col-md-8">
                            <input type="text" name="article_pagesize" id="article_pagesize" value="<?php echo $haya_blog_author['article_pagesize']; ?>" placeholder="填写博客每页数量" class="form-control">
                            <div class="figure-caption mt-2">
                                设置博客博客每页数量
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="is_recommend">
                            推荐：
                        </label>
                        <div class="col-md-8">
                            <div id="is_recommend">
                                <?php if (isset($haya_blog_author['is_recommend']) && $haya_blog_author['is_recommend'] == 0) { ?>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="is_recommend" value="1"> 开启
                                    </label>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="is_recommend" value="0" checked="checked"> 关闭
                                    </label>
                                <?php } else { ?>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="is_recommend" value="1" checked="checked"> 开启
                                    </label>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="is_recommend" value="0"> 关闭
                                    </label>
                                <?php } ?>
                            </div>
                            
                            <div class="figure-caption mt-2">
                                设置专栏的推荐状态
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row">
                        <label class="col-md-2 form-control-label text-md-right pr-0" for="status">
                            状态：
                        </label>
                        <div class="col-md-8">
                            <div id="status">
                                <?php if (isset($haya_blog_author['status']) && $haya_blog_author['status'] == 0) { ?>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="status" value="1"> 正常
                                    </label>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="status" value="0" checked="checked"> 关闭
                                    </label>
                                <?php } else { ?>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="status" value="1" checked="checked"> 正常
                                    </label>
                                    <label class="custom-input custom-radio mr-3">
                                        <input type="radio" name="status" value="0"> 关闭
                                    </label>
                                <?php } ?>
                            </div>
                            
                            <div class="figure-caption mt-2">
                                设置专栏的启用状态
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group row mb-3">
                        <label class="col-md-2 form-control-label"></label>
                        <div class="col-md-2">
                            <button type="submit" class="btn btn-primary btn-block mr-2 mb-2" id="submit"><?php echo lang('save'); ?></button>
                        </div>
                        <div class="col-md-2">
                            <a role="button" class="btn btn-secondary btn-block mb-2" href="javascript:history.back();"><?php echo lang('back'); ?></a>
                        </div>
                    </div>
                    
                </form>
            </div>
        </div>

    </div>
</div>

<?php
include _include(ADMIN_PATH.'view/htm/footer.inc.htm');
?>

<script>
$(function() {
    $('#nav li.nav-item-haya_blog').addClass('active');
    
    $(document).on('change', '.haya-blog-author-cover-name', function(e) {
        var files = xn.get_files_from_event(e);
        if (!files[0]) return;
        
        var name = files[0]['name'];
        
        $(".haya-blog-author-cover-show")
            .removeClass('d-none')
            .text(name);
    });
});
</script>
